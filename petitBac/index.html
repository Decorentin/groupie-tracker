<!DOCTYPE html>
<html>
<head>
    <title>Petit Bac</title>
</head>
<body>
    <h1>Petit Bac</h1>
    <div id="gameArea"></div>
    <script>
        let socket = new WebSocket("ws://" + window.location.host + "/ws");

        socket.onmessage = function(event) {
            let data = JSON.parse(event.data);
            let html = `<h2>La lettre de cette manche est : ${data.letter}</h2>`;
            for (let category of data.categories) {
                html += `<p>${category}: <input type='text' onchange='sendResponse("${category}", this.value)'></p>`;
            }
            document.getElementById('gameArea').innerHTML = html;
        };

        function sendResponse(category, response) {
            let message = JSON.stringify({[category]: response});
            socket.send(message);
        }
    </script>
</body>
</html>